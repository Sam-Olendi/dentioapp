<template name="reportsCash">

    <div class="reports-filter-section">

        {{> reportsCashCompany }}

        {{> reportsCashInsurance }}

        {{> reportsCashDate }}

        {{> reportsCashPatient }}

    </div>

    <table>
        <tr>
            <th>Date of Appointment</th>
            <th>Patient</th>
            <th>Amount</th>
            <th>Invoice Number</th>
            <th>Company</th>
            <th>Insurance</th>
        </tr>

        {{> reportsCashTable }}

    </table>

</template>

<template name="reportsCashCompany">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by company</label><br>
        <input type="search" placeholder="Show all companies" class="reports-filter-input" id="reports-cash-filter-company">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-cash-filter-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-insurance-all">Reset: Show all</li>
                <li class="reports-filter-search-result js-reports-filter-company-private" data-id="private">Private</li>
                {{#each results}}
                    <li class="reports-filter-search-result js-reports-filter-company" data-id="{{ _id }}">{{ company_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsCashInsurance">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by insurance</label><br>
        <input type="search" placeholder="Show all insurances" class="reports-filter-input" id="reports-cash-filter-insurance">
        <i class="icon-arrow_drop_down"></i><ul class="reports-cash-filter-results">
        {{#if searching}}
            Loading...
        {{else}}
            <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-insurance-all">Reset: Show all</li>
            <li class="reports-filter-search-result js-reports-filter-company-private" data-id="private">Private</li>
            {{#each results}}
                <li class="reports-filter-search-result js-reports-filter-insurance" data-id="{{ _id }}">{{ insurance_name }}</li>
            {{else}}
                <p class="reports-filter-search-result-none">{{ query }} not found</p>
            {{/each}}
        {{/if}}
    </ul>
    </div>
</template>

<template name="reportsCashDate">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by date range</label><br>
        <input type="text" placeholder="From date..." class="reports-filter-input" id="reports-filter-date">
        <i class="icon-arrow_drop_down"></i>
        <input type="text" placeholder="To date..." class="reports-filter-input" id="reports-filter-date-to">
        <i class="icon-arrow_drop_down"></i>
    </div>
</template>

<template name="reportsCashPatient">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by patient</label><br>
        <input type="text" placeholder="Show all patients" class="reports-filter-input" id="reports-cash-filter-patients">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-cash-filter-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-insurance-all">Reset: Show all</li>
                <li class="reports-filter-search-result js-reports-filter-company-private" data-id="private">Private</li>
                {{#each results}}
                    <li class="reports-filter-search-result js-reports-filter-insurance" data-id="{{ _id }}">{{ profile.surname }}, {{ profile.first_name }} {{ profile.middle_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsCashTable">
    {{#each treatments}}
        <tr>
            <td>{{ date_performed }}</td>
            <td>{{ patient.profile.surname }}, {{ patient.profile.first_name }} {{ patient.profile.middle_name }}</td>
            <td>Kshs. {{ total }}</td>
            <td>{{ invoice_no.invoice_no }}</td>
            <td>{{ company }}</td>
            <td>{{ insurance }}</td>
        </tr>
    {{/each}}
</template>