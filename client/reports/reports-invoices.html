<template name="reportsInvoices">

    <div class="reports-filter">

        <div class="reports-filter-section">

            {{> reportsInvoicesCompany }}

            {{> reportsInvoicesInsurance }}

            {{> reportsInvoicesDate }}

            {{> reportsInvoicesPatients }}

        </div>

    </div>

    <div>

        <table>
            <tr>
                <th>Invoice Number</th>
                <th>Patient Name</th>
                <th>Company</th>
                <th>Insurance Provider</th>
                <th>Amount</th>
                <th>Date Issued</th>
            </tr>

            {{> reportsInvoicesTable }}

        </table>

    </div>

</template>

<template name="reportsInvoicesCompany">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by company</label><br>
        <input type="search" placeholder="Show all companies" class="reports-filter-input" id="reports-filter-company">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-company-all">Reset: Show all</li>
                <li class="reports-filter-search-result js-reports-filter-company-private" data-id="private">Private</li>
                {{#each companies}}
                    <li class="reports-filter-search-result js-reports-filter-company" data-id="{{ _id }}">{{ company_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesInsurance">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by insurance</label><br>
        <input type="search" placeholder="Show all insurances" class="reports-filter-input" id="reports-filter-insurance">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-insurance-all">Reset: Show all</li>
                {{#each insurances}}
                    <li class="reports-filter-search-result js-reports-filter-insurance" data-id="{{ _id }}">{{ insurance_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesDate">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by date range</label><br>
        <input type="text" placeholder="From date..." class="reports-filter-input" id="reports-filter-date">
        <i class="icon-arrow_drop_down"></i>
        <input type="text" placeholder="To date..." class="reports-filter-input" id="reports-filter-date-to">
        <i class="icon-arrow_drop_down"></i>
    </div>
</template>

<template name="reportsInvoicesPatients">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by patient</label><br>
        <input type="text" placeholder="Show all patients" class="reports-filter-input" id="reports-filter-patients">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-patients-all">Reset: Show all</li>
                {{#each patients}}
                    <li class="reports-filter-search-result js-reports-filter-patient" data-id="{{ _id }}">{{ profile.surname }}, {{ profile.first_name }} {{ profile.middle_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesTable">
    {{#each invoices}}
        <tr>
            <td>{{ invoice_no }}</td>
            <td>{{ patient.profile.surname }}, {{ patient.profile.first_name }} {{ patient.profile.middle_name }}</td>
            <td>{{ company.company_name }}</td>
            <td>{{ insurance.insurance_name }}</td>
            <td>{{ amount }}</td>
            <td>{{ date_issued }}</td>
        </tr>
    {{/each}}
</template>