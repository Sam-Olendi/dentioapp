<template name="reports">
    <div class="body-content">
        <header class="body-header">
            <h1 class="body-header-title">
                {{> reportsHeaderTitle }}
            </h1>
        </header>
        <section class="body-flesh">
            {{> reportsContent }}
        </section>
    </div>
</template>

<template name="reportsHeaderTitle">
    Reports <small class="body-header-subtitle">Generate and print your reports here</small>
</template>

<template name="reportsContent">

    <nav class="reports-navigation">
        <ul class="reports-tabs">
            <li class="reports-tabs-tab">
                <a href="#" class="reports-tabs-link" data-content="summary">Summary</a>
            </li>
            <li class="reports-tabs-tab">
                <a href="#" class="reports-tabs-link" data-content="invoices">Invoices</a>
            </li>
            <li class="reports-tabs-tab">
                <a href="#" class="reports-tabs-link reports-tabs-link-is-selected" data-content="patients">Patients</a>
            </li>
        </ul>
    </nav>

    <ul class="reports-tabs-content">
        <li class="reports-tabs-content-section" data-content="summary">
            <div class="reports-tabs-content-wrapper">
                {{> reportsSummary }}
            </div>
        </li>
        <li class="reports-tabs-content-section" data-content="invoices">
            <div class="reports-tabs-content-wrapper">
                {{> reportsInvoices }}
            </div>
        </li>
        <li class="reports-tabs-content-section reports-tabs-content-section-is-selected" data-content="patients">
            <div class="reports-tabs-content-wrapper">
                {{> reportsPatients }}
            </div>
        </li>
    </ul>

</template>

<template name="reportsSummary">
    <div class="reports-summary-card">
        <div>
            <p class="reports-summary-value"> {{ daysPatients }} </p>
            <p class="reports-summary-title">Patients seen: <span class="reports-summary-title-highlight">today</span></p>
        </div>
    </div>

    <div class="reports-summary-card">
        <div>
            <p class="reports-summary-value"> {{ monthsPatients }} </p>
            <p class="reports-summary-title">Patients seen: <span class="reports-summary-title-highlight">this month</span></p>
        </div>
    </div>

    <div class="reports-summary-card">
        <div>
            <p class="reports-summary-value"><span class="reports-summary-value-currency">Kshs.</span> {{ totalAmount }}</p>
            <p class="reports-summary-title">Money made: <span class="reports-summary-title-highlight">today</span></p>
        </div>
    </div>

    <div class="reports-summary-card">
        <div>
            <p class="reports-summary-value"><span class="reports-summary-value-currency">Kshs.</span> {{ monthsAmount }}</p>
            <p class="reports-summary-title">Money made: <span class="reports-summary-title-highlight">this month</span></p>
        </div>
    </div>
</template>

<template name="reportsInvoices">

    <div class="reports-filter">

        <div class="reports-filter-section">
            <!--<p class="reports-filter-title">Filter</p>-->

            {{> reportsInvoicesCompany }}

            {{> reportsInvoicesInsurance }}

            {{> reportsInvoicesDate }}

            {{> reportsInvoicesPatients }}

        </div>

    </div>

    <div>

        <table>
            <tr>
                <th>Invoice Number</th>
                <th>Patient Name</th>
                <th>Company</th>
                <th>Insurance Provider</th>
                <th>Date Issued</th>
            </tr>

            {{> reportsInvoicesTable }}

        </table>

    </div>

</template>

<template name="reportsInvoicesCompany">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by company</label><br>
        <input type="search" placeholder="Show all companies" class="reports-filter-input" id="reports-filter-company">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-company-all">Reset: Show all</li>
                <li class="reports-filter-search-result js-reports-filter-company-private" data-id="private">Private</li>
                {{#each companies}}
                    <li class="reports-filter-search-result js-reports-filter-company" data-id="{{ _id }}">{{ company_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesInsurance">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by insurance</label><br>
        <input type="search" placeholder="Show all insurances" class="reports-filter-input" id="reports-filter-insurance">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-insurance-all">Reset: Show all</li>
                {{#each insurances}}
                    <li class="reports-filter-search-result js-reports-filter-insurance" data-id="{{ _id }}">{{ insurance_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesDate">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by date</label><br>
        <input type="text" placeholder="Show all dates" class="reports-filter-input" id="reports-filter-date">
        <i class="icon-arrow_drop_down"></i>
    </div>
</template>

<template name="reportsInvoicesPatients">
    <div class="reports-filter-group">
        <label class="reports-filter-label">Sort by patient</label><br>
        <input type="text" placeholder="Show all patients" class="reports-filter-input" id="reports-filter-patients">
        <i class="icon-arrow_drop_down"></i>
        <ul class="reports-filter-search-results">
            {{#if searching}}
                Loading...
            {{else}}
                <li class="reports-filter-search-result mod-reports-filter-search-result-reset js-reports-filter-patients-all">Reset: Show all</li>
                {{#each patients}}
                    <li class="reports-filter-search-result js-reports-filter-patient" data-id="{{ _id }}">{{ profile.surname }}, {{ profile.first_name }} {{ profile.middle_name }}</li>
                {{else}}
                    <p class="reports-filter-search-result-none">{{ query }} not found</p>
                {{/each}}
            {{/if}}
        </ul>
    </div>
</template>

<template name="reportsInvoicesTable">
    {{#each invoices}}
        <tr>
            <td>{{ invoice_no }}</td>
            <td>{{ patient.profile.surname }}, {{ patient.profile.first_name }} {{ patient.profile.middle_name }}</td>
            <td>{{ company.company_name }}</td>
            <td>{{ insurance.insurance_name }}</td>
            <td>{{ date_issued }}</td>
        </tr>
    {{/each}}
</template>

